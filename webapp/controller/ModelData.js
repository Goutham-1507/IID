var ModelData={FindFirst:function(a,b,c,d,e){var f=ModelData.Find(a,b,c,d);return f.length>0?("function"==typeof e&&e(f[0]),f[0]):("function"==typeof e&&e({}),{})},LookupValue:function(a,b,c,d,e,f){var g=ModelData.Find(a,b,c,e,f);return g.length>0?g[0][d]:c},FindDB:function(a,b,c,d,e){if("undefined"==typeof AppDB)return void("function"==typeof e&&e());var f=this.getModel(a),g=new Array;if("string"==typeof d){var h=[];h[0]=d}else var h=d;AppDB.transaction(function(a){a.executeSql("SELECT * FROM "+b+" WHERE "+c,h,function(a,b){for(var c=0;c<b.rows.length;c++){var d=b.rows.item(c);for(var h in d)"false"===d[h]&&(d[h]=!1),"true"===d[h]&&(d[h]=!0);g.push(d)}f.setData(g),"function"==typeof e&&e()},null)},function(a){"0"!==a.code&&e()})},_Compare:function(a,b,c){var d=!1;switch(c){case"Contains":d=a.indexOf(b)!=-1;break;case"NE":d=a!=b;break;case"GT":d=a>b;break;case"GE":d=a>=b;break;case"LT":d=a<b;break;case"LE":d=a<=b;break;case"BT":$.isArray(b)&&2==b.length&&(d=a>=b[0]&&a<=b[1]);break;case"StartsWith":d=b.toString().length<=a.toString().length&&b.toString()==a.toString().substr(0,b.toString().length);break;case"EndsWith":d=b.toString().length<=a.toString().length&&b.toString()==a.toString().substr(a.toString().length-b.toString().length,b.toString().length);break;default:d=a==b}return d},_CompareObjWithArray:function(a,b,c,d){var e=!0;return b.forEach(function(b,f,g){e=e&&ModelData._Compare(a[b],c[f],d[f])}),e},_CompareObjWithObj:function(a,b,c,d){var e=!0;return b.forEach(function(b,f,g){e=e&&ModelData._Compare(a[b],c[b],d[f])}),e},Find:function(a,b,c,d,e){var f=this.getModel(a),g=f.oData,h=[];if(!$.isArray(g)||0==g.length)return h;if($.isArray(b)||(b=void 0===b?[]:[b]),$.isArray(c)||(c=void 0===c?[]:[c]),"undefined"==typeof d&&(d="EQ"),!$.isArray(d)){var i=d;d=[],b.forEach(function(a,b,c){d.push(i)})}return b.length!=c.length||b.length!=d.length?h:(h=0===b.length?g:g.filter(function(a){return ModelData._CompareObjWithArray(a,b,c,d)}),"function"==typeof e&&e(h),g=null,h)},Delete:function(a,b,c,d){var e=this.getModel(a),f=e.oData;if($.isArray(f)&&0!=f.length){if($.isArray(b)||(b=void 0===b?[]:[b]),$.isArray(c)||(c=void 0===c?[]:[c]),"undefined"==typeof d&&(d="EQ"),!$.isArray(d)){var g=d;d=[],b.forEach(function(a,b,c){d.push(g)})}if(b.length==c.length&&b.length==d.length){if(0===b.length)f=[];else for(var i=f.length;i--;)ModelData._CompareObjWithArray(f[i],b,c,d)&&f.splice(i,1);e.setData(f)}}},UpdateField:function(a,b,c,d,e,f){var g=this.getModel(a),h=g.oData;if("undefined"!=typeof d){if($.isArray(b)||(b=void 0===b?[]:[b]),$.isArray(c)||(c=void 0===c?[]:[c]),$.isArray(d)||(d=void 0===d?[]:[d]),$.isArray(e)||(e=void 0===e?[]:[e]),"undefined"==typeof f&&(f="EQ"),!$.isArray(f)){var i=f;f=[],b.forEach(function(a,b,c){f.push(i)})}if(b.length==c.length&&b.length==f.length&&d.length==e.length){for(var k=h.length;k--;)ModelData._CompareObjWithArray(h[k],b,c,f)&&d.forEach(function(a,b,c){h[k][a]=e[b]});g.setData(h)}}},Add:function(a,b){var c=this.getModel(a),d=[];"undefined"!=typeof c.oData&&c.oData.length&&(d=c.oData),d.push(b),c.setData(d),c=null,d=null},AddArray:function(a,b){var c=this.getModel(a),d=[];"undefined"!=typeof c.oData&&c.oData.length&&(d=c.oData),$.each(b,function(a,b){d.push(b)}),c.setData(d)},Update:function(a,b,c,d,e){var f=this.getModel(a),g=f.oData,h=!1;if("undefined"==typeof g)var g=new Array;if($.isArray(b)||(b=void 0===b?[]:[b]),$.isArray(c)||(c=void 0===c?[]:[c]),"undefined"==typeof e&&(e="EQ"),!$.isArray(e)){var i=e;e=[],b.forEach(function(a,b,c){e.push(i)})}if(b.length==c.length&&b.length==e.length){if(b.length>0)for(var k=g.length;k--;)ModelData._CompareObjWithArray(g[k],b,c,e)&&(g[k]=d,h=!0);1==h?f.setData(g):ModelData.Add(a,d)}},UpdateArray:function(a,b,c,d){var e=this.getModel(a),f=e.oData,g=!1;if("undefined"==typeof f.length)var f=new Array;if($.isArray(b)||(b=void 0===b?[]:[b]),"undefined"==typeof d&&(d="EQ"),!$.isArray(d)){var h=d;d=[],b.forEach(function(a,b,c){d.push(h)})}b.length==d.length&&($.each(c,function(a,c){if(g=!1,b.length>0)for(a=0;a<f.length;a++)ModelData._CompareObjWithObj(f[a],b,c,d)&&(f[a]=c,g=!0);g===!1&&f.push(c)}),e.setData(f))},getModel:function(a){var b=a.getModel();if("undefined"==typeof b)for(var c in a.oModels)var b=a.getModel(c);return b},genID:function(){var a=(new Date).getTime(),b="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){var c=(a+16*Math.random())%16|0;return a=Math.floor(a/16),("x"==b?c:7&c|8).toString(16)});return b}};